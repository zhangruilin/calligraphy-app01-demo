<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¢¨éŸµ AI - ä¹¦æ³•æ™ºèƒ½è¯„ä¼°å¹³å°</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Load Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-vermilion: #DC143C;
            --color-ink: #2B2B2B;
            --color-rice-paper: #F7F6F2;
        }
        body {
            background-color: #e5e5e5;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Noto Sans SC', sans-serif;
        }
        .mobile-frame {
            background-color: #F9F9F9;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            max-height: 850px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        @media (min-width: 640px) {
            .mobile-frame {
                border-radius: 40px;
                height: 90vh;
                border: 8px solid #2B2B2B;
            }
        }
        .font-serif { font-family: 'Noto Serif SC', serif; }
        .text-vermilion { color: var(--color-vermilion); }
        .bg-vermilion { background-color: var(--color-vermilion); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .fade-enter { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in-bottom { animation: slideInBottom 0.3s ease-out forwards; }
        @keyframes slideInBottom {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root" class="w-full flex justify-center"></div>

    <script type="text/babel">
        // Explicitly destructure React hooks from window object to avoid ReferenceErrors
        const { useState, useEffect, useMemo } = React;
        
        // --- Components: Icons ---
        const Icon = ({ name, size = 24, className = "", fill }) => {
            useEffect(() => { 
                if (window.lucide) {
                    window.lucide.createIcons(); 
                }
            }, [name]);
            return <i data-lucide={name} width={size} height={size} className={className} fill={fill || "none"}></i>;
        };

        // --- Mock Data ---
        const DEMO_USER = { name: "å¼ å°å¢¨", days: 12, avgScore: 86, totalPractices: 48, today: 2, maxScore: 95 };
        const MOCK_RECOMMENDATIONS = [ ['ä¸­', 'äºº', 'å¤§'], ['å¤©', 'åœ°', 'ç„'] ];
        const PRACTICE_CATEGORIES = [ { id: 'all', label: 'å…¨éƒ¨' }, { id: 'basic', label: 'å…¥é—¨' }, { id: 'structure', label: 'ç»“æ„' }, { id: 'advanced', label: 'è¿›é˜¶' } ];
        const PRACTICE_CHARS = [ { char: 'ä¸€', level: 'å…¥é—¨' }, { char: 'å', level: 'å…¥é—¨' }, { char: 'äºº', level: 'å…¥é—¨' }, { char: 'å¤§', level: 'å…¥é—¨' }, { char: 'æœ¨', level: 'ç»“æ„' }, { char: 'æ—', level: 'ç»“æ„' }, { char: 'æ£®', level: 'ç»“æ„' }, { char: 'æ°¸', level: 'è¿›é˜¶' }, { char: 'å®¶', level: 'è¿›é˜¶' }, { char: 'å›½', level: 'è¿›é˜¶' }, { char: 'é£', level: 'è¿›é˜¶' }, { char: 'é£', level: 'è¿›é˜¶' } ];

        const DEMO_HISTORY = [
            { id: 1, char: 'æƒ³', score: 65, grade: 'C', date: '9å°æ—¶å‰', level: 'ç­‰çº§ 3', title: 'åˆå­¦è€…',
              dimensions: [
                { name: 'ç¬”ç”»é¡ºåº', score: 65.0, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ–Šï¸', comment: 'é¡ºåºé”™è¯¯' }, 
                { name: 'ç¬”è§¦è´¨é‡', score: 87.6, color: 'bg-green-500', text: 'text-green-500', icon: 'ğŸ–Œï¸', comment: 'çº¿æ¡æµç•…' }, 
                { name: 'å­—ä½“ç»“æ„', score: 83.7, color: 'bg-green-500', text: 'text-green-500', icon: 'ğŸ—ï¸', comment: 'ç»“æ„åè°ƒ' },
                { name: 'å¹³è¡¡æ€§', score: 83.8, color: 'bg-green-500', text: 'text-green-500', icon: 'âš–ï¸', comment: 'é‡å¿ƒå¹³ç¨³' },
                { name: 'æ•´ä½“ç¾æ„Ÿ', score: 67.3, color: 'bg-orange-500', text: 'text-orange-500', icon: 'âœ¨', comment: 'ç¨æ˜¾å±€ä¿ƒ' }, 
                { name: 'å­—å½¢å‡†ç¡®åº¦', score: 58.3, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ¯', comment: 'å·®å¼‚è¾ƒå¤§' },
                { name: 'ä¹¦å†™èŠ‚å¥', score: 73.1, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸµ', comment: 'ç¼ºä¹å˜åŒ–' },
                { name: 'è¿›æ­¥è¯„åˆ†', score: 0.0, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ“ˆ', comment: 'é¦–æ¬¡ç»ƒä¹ ' },
              ],
              advice: [ { icon: 'ğŸ“', text: 'å‡†ç¡®åº¦éœ€åŠ å¼ºï¼šå¯¹ç…§æ ‡å‡†æ¥·ä¹¦' }, { icon: 'âœ¨', text: 'ç¬”è§¦è´¨é‡ä¼˜ç§€ï¼Œç»§ç»­ä¿æŒï¼' } ]
            },
             { id: 2, char: 'å•', score: 72, grade: 'C', date: '10å°æ—¶å‰', level: 'ç­‰çº§ 3', title: 'åˆå­¦è€…',
              dimensions: [
                { name: 'ç¬”ç”»é¡ºåº', score: 100, color: 'bg-green-500', text: 'text-green-500', icon: 'ğŸ–Šï¸', comment: 'å®Œå…¨æ­£ç¡®' },
                { name: 'ç¬”è§¦è´¨é‡', score: 60, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸ–Œï¸', comment: 'åŠ›åº¦ä¸è¶³' },
                { name: 'å­—ä½“ç»“æ„', score: 75, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸ—ï¸', comment: 'ç»“æ„å°šå¯' },
                { name: 'å¹³è¡¡æ€§', score: 65, color: 'bg-orange-500', text: 'text-orange-500', icon: 'âš–ï¸', comment: 'é‡å¿ƒç•¥å' },
                { name: 'æ•´ä½“ç¾æ„Ÿ', score: 70, color: 'bg-orange-500', text: 'text-orange-500', icon: 'âœ¨', comment: 'æœ‰å¾…æå‡' },
                { name: 'å­—å½¢å‡†ç¡®åº¦', score: 80, color: 'bg-green-500', text: 'text-green-500', icon: 'ğŸ¯', comment: 'æ¯”è¾ƒå‡†ç¡®' },
                { name: 'ä¹¦å†™èŠ‚å¥', score: 55, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸµ', comment: 'èŠ‚å¥å•ä¸€' },
                { name: 'è¿›æ­¥è¯„åˆ†', score: 10, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ“ˆ', comment: 'ç•¥æœ‰è¿›æ­¥' },
              ], 
              advice: [ { icon: 'ğŸ–Œï¸', text: 'ç¬”è§¦åŠ›åº¦æœ‰å¾…åŠ å¼ºï¼Œå°è¯•åœ¨ä¸‹ç¬”å’Œæ”¶ç¬”æ—¶å¢åŠ ä¸€äº›é¡¿æŒ«æ„Ÿï¼Œä½¿çº¿æ¡æ›´å…·åŠ›é‡ã€‚' }, { icon: 'âš–ï¸', text: 'å­—çš„é‡å¿ƒç•¥æœ‰åç§»ï¼Œç‰¹åˆ«æ³¨æ„ä¸Šä¸‹ç»“æ„çš„å¯¹ç§°ä¸ç¨³å®šï¼Œç¡®ä¿ä¸­è½´çº¿æ¸…æ™°ã€‚' }, { icon: 'ğŸµ', text: 'ä¹¦å†™èŠ‚å¥è¾ƒä¸ºå¹³æ·¡ï¼Œå¯ä»¥å°è¯•åœ¨æ’‡ã€æºç­‰ç¬”ç”»ä¸­åŠ å…¥é€Ÿåº¦å˜åŒ–ï¼Œå¢åŠ å­—çš„éŸµå¾‹æ„Ÿã€‚' }, { icon: 'ğŸ‘', text: 'ç¬”ç”»é¡ºåºéå¸¸æ£’ï¼Œè¯·ç»§ç»­ä¿æŒè¿™ä¸ªå¥½ä¹ æƒ¯ï¼' } ]
            },
             { id: 3, char: 'é“', score: 76, grade: 'C', date: '10å°æ—¶å‰', level: 'ç­‰çº§ 3', title: 'åˆå­¦è€…',
              dimensions: [
                { name: 'ç¬”ç”»é¡ºåº', score: 100, color: 'bg-green-500', text: 'text-green-500', icon: 'ğŸ–Šï¸', comment: 'å®Œå…¨æ­£ç¡®' },
                { name: 'ç¬”è§¦è´¨é‡', score: 50, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ–Œï¸', comment: 'çº¿æ¡å‘è™š' },
                { name: 'å­—ä½“ç»“æ„', score: 60, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸ—ï¸', comment: 'ç»“æ„æ¾æ•£' },
                { name: 'å¹³è¡¡æ€§', score: 70, color: 'bg-orange-500', text: 'text-orange-500', icon: 'âš–ï¸', comment: 'é‡å¿ƒå¹³ç¨³' },
                { name: 'æ•´ä½“ç¾æ„Ÿ', score: 58, color: 'bg-red-500', text: 'text-red-500', icon: 'âœ¨', comment: 'ç¾æ„Ÿä¸è¶³' },
                { name: 'å­—å½¢å‡†ç¡®åº¦', score: 62, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸ¯', comment: 'å·®å¼‚ç¨å¤§' },
                { name: 'ä¹¦å†™èŠ‚å¥', score: 68, color: 'bg-orange-500', text: 'text-orange-500', icon: 'ğŸµ', comment: 'èŠ‚å¥å¹³å¹³' },
                { name: 'è¿›æ­¥è¯„åˆ†', score: 30, color: 'bg-red-500', text: 'text-red-500', icon: 'ğŸ“ˆ', comment: 'æœ‰è¾ƒå¤§è¿›æ­¥' },
              ], 
              advice: [ { icon: 'ğŸ–Œï¸', text: 'çº¿æ¡ç•¥æ˜¾è™šæµ®ï¼Œæ³¨æ„ä¸­é”‹è¡Œç¬”ï¼Œä¿æŒç¬”å°–ä¸çº¸é¢çš„ç¨³å®šæ¥è§¦ï¼Œè®©çº¿æ¡æ›´æ‰å®ã€‚' }, { icon: 'ğŸ—ï¸', text: 'ç»“æ„æœ‰äº›æ¾æ•£ï¼Œç‰¹åˆ«æ˜¯èµ°ä¹‹åº•å’Œé¦–éƒ¨çš„é…åˆï¼Œæ³¨æ„å†…éƒ¨éƒ¨ä»¶çš„ç´§å‡‘å’Œå¤–éƒ¨èµ°ä¹‹åº•çš„èˆ’å±•ã€‚' }, { icon: 'ğŸ¯', text: 'å­—å½¢ä¸æ ‡å‡†å­—å¸–æœ‰ä¸€å®šå·®å¼‚ï¼Œå»ºè®®å¤šè¯»å¸–ï¼Œä»”ç»†è§‚å¯Ÿæ¯ä¸€ç¬”çš„ä½ç½®å’Œå½¢æ€ã€‚' } ]
            }
        ];

        // --- Components: Common ---
        const FullScreenOverlay = ({ children, zIndex = 50 }) => (
            <div className={`absolute inset-0 bg-stone-50 z-${zIndex} flex flex-col overflow-y-auto fade-enter`}>
                {children}
            </div>
        );

        const ResultMenu = ({ onClose, onAction }) => (
            <div className="fixed inset-0 z-[70] bg-black/50 flex flex-col justify-end fade-enter" onClick={onClose}>
                <div className="bg-white rounded-t-2xl overflow-hidden slide-in-bottom" onClick={e => e.stopPropagation()}>
                    <div className="p-4 text-center border-b border-stone-100 font-bold text-stone-800">æ›´å¤šæ“ä½œ</div>
                    <div className="p-4 grid grid-cols-4 gap-4">
                        {[{ icon: 'image', text: 'ç”Ÿæˆæµ·æŠ¥', action: 'share' }, { icon: 'pen-tool', text: 'çº¢æœ±æ‰¹', action: 'annotate' }, { icon: 'download', text: 'ä¿å­˜åŸå›¾', action: 'save' }, { icon: 'share-2', text: 'åˆ†äº«', action: 'share_link' }].map((item, i) => (
                            <div key={i} onClick={() => { onAction(item.action); onClose(); }} className="flex flex-col items-center gap-2 p-2 active:bg-stone-50 rounded-xl cursor-pointer">
                                <div className="w-12 h-12 bg-stone-50 rounded-full flex items-center justify-center text-stone-600"><Icon name={item.icon} size={20} /></div>
                                <span className="text-xs text-stone-600">{item.text}</span>
                            </div>
                        ))}
                    </div>
                    <div className="p-4 border-t border-stone-100"><button onClick={onClose} className="w-full py-3 bg-stone-50 rounded-xl text-stone-500 font-bold text-sm">å–æ¶ˆ</button></div>
                </div>
            </div>
        );

        const ShareModal = ({ onClose, score, grade, char }) => (
            <div className="fixed inset-0 z-[80] bg-black/80 flex items-center justify-center p-6 fade-enter" onClick={onClose}>
                <div className="bg-white w-full max-w-sm rounded-2xl overflow-hidden shadow-2xl" onClick={e => e.stopPropagation()}>
                    <div className="bg-rice-paper p-8 text-center border-b border-stone-100">
                        <div className="w-20 h-20 mx-auto bg-white border-2 border-stone-100 rounded-xl flex items-center justify-center mb-4 shadow-inner"><span className="font-serif text-4xl text-stone-800">{char}</span></div>
                        <h3 className="text-vermilion font-bold text-lg mb-1">ä¹¦æ³•è¯„ä¼°æŠ¥å‘Š</h3>
                        <p className="text-stone-500 text-xs mb-6">å¾—åˆ†ï¼š{score}</p>
                        <div className="inline-block border border-yellow-500 text-yellow-600 px-4 py-1 rounded-full font-bold text-sm">ç­‰çº§ï¼š{grade}</div>
                    </div>
                    <div className="p-6 bg-white space-y-3">
                        <button className="w-full bg-green-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2"><Icon name="message-circle" size={18} /> åˆ†äº«</button>
                    </div>
                </div>
            </div>
        );

        // --- Screens ---

        const LoginScreen = ({ onLogin }) => (
            <div className="flex-1 flex flex-col items-center justify-center p-6 text-center fade-enter">
                <div className="w-24 h-24 bg-gradient-to-br from-stone-800 to-stone-600 rounded-3xl flex items-center justify-center shadow-xl mb-8 transform hover:scale-105 transition-transform">
                    <span className="text-white text-5xl font-serif font-bold">å¢¨</span>
                </div>
                <h1 className="text-3xl font-serif font-bold mb-2 text-stone-800">ä¹¦æ³• AI å­¦ä¹ å¹³å°</h1>
                <p className="text-stone-500 mb-12">8ç»´æ™ºèƒ½è¯„ä¼° Â· 30ç§’å³æ—¶åé¦ˆ</p>
                <div className="w-full max-w-xs bg-white p-6 rounded-2xl shadow-sm border border-stone-100">
                    <button onClick={onLogin} className="w-full bg-vermilion text-white py-4 rounded-xl text-lg font-bold shadow-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                        <Icon name="smartphone" size={20} /> æ‰‹æœºå·ä¸€é”®ç™»å½•
                    </button>
                </div>
            </div>
        );

        const DashboardScreen = ({ onUpload, onNavigate }) => {
            const StatCard = ({ icon, value, label, sub }) => (
                <div className="bg-white p-3 rounded-2xl shadow-sm border border-stone-100 flex flex-col items-center justify-center text-center h-28 relative overflow-hidden group cursor-pointer active:scale-95 transition-transform">
                    <div className="text-vermilion mb-1 transform group-hover:scale-110 transition-transform"><Icon name={icon} size={24} /></div>
                    <div className="text-2xl font-bold text-stone-800 font-serif leading-none mb-1">{value}</div>
                    <div className="text-xs text-stone-400">{label}</div>
                    {sub && <div className="absolute top-2 right-2 text-[10px] text-green-500 font-medium">{sub}</div>}
                </div>
            );
            return (
                <div className="flex-1 p-4 space-y-6 fade-enter overflow-y-auto pb-24 no-scrollbar">
                     <div className="flex justify-between items-center pt-4">
                        {/* FIXED AVATAR SECTION */}
                        <div className="flex items-center gap-3 overflow-hidden">
                            <div className="w-10 h-10 bg-stone-200 rounded-full overflow-hidden border border-white shadow-sm shrink-0">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar" className="w-full h-full object-cover" />
                            </div>
                            <div className="min-w-0">
                                <div className="text-sm font-bold text-stone-800 truncate">æ—©å®‰ï¼Œ{DEMO_USER.name}</div>
                                <div className="text-[10px] text-stone-400 truncate">ä¹¦å±±æœ‰è·¯å‹¤ä¸ºå¾„</div>
                            </div>
                        </div>
                        <Icon name="bell" className="text-stone-400 shrink-0" size={20} />
                    </div>
                    
                    <div onClick={onUpload} className="bg-[#1a1a1a] rounded-2xl p-5 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-transform">
                        <div className="absolute top-[-10px] right-[-10px] opacity-10 transform rotate-12"><Icon name="pen-tool" size={100} /></div>
                        <h3 className="text-xl font-serif font-bold mb-1 relative z-10">ä¸Šä¼ ä¹¦æ³•ä½œå“</h3>
                        <p className="text-stone-400 text-xs mb-4 relative z-10">AI 8ç»´åº¦æ™ºèƒ½è¯„ä¼°ï¼Œ30ç§’å‡ºç»“æœ</p>
                        <button className="bg-vermilion text-white px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-md hover:bg-red-600 transition-colors relative z-10"><Icon name="camera" size={16} /> ç«‹å³æ‹ç…§è¯„ä¼°</button>
                    </div>
                    
                    <div className="flex gap-4">
                        <button onClick={() => onNavigate('history')} className="flex-1 py-3 rounded-xl border border-stone-300 text-stone-600 font-bold flex items-center justify-center gap-2 hover:bg-stone-50 active:scale-95 transition-transform"><Icon name="history" size={18} /> å†å²è®°å½•</button>
                        <button onClick={() => onNavigate('practice')} className="flex-1 py-3 rounded-xl border border-stone-300 text-stone-600 font-bold flex items-center justify-center gap-2 hover:bg-stone-50 active:scale-95 transition-transform"><Icon name="book-open" size={18} /> æ¨èç»ƒä¹ </button>
                    </div>
                    <div>
                        <h3 className="font-bold text-stone-800 mb-3 text-sm pl-1">å­¦ä¹ ç»Ÿè®¡</h3>
                        <div className="grid grid-cols-3 gap-3">
                            <StatCard icon="pen-tool" value={DEMO_USER.totalPractices} label="æ€»ç»ƒä¹ " />
                            <StatCard icon="star" value={DEMO_USER.avgScore} label="å¹³å‡åˆ†" />
                            <StatCard icon="trending-up" value={DEMO_USER.maxScore} label="æœ€é«˜åˆ†" />
                        </div>
                    </div>
                    <div>
                        <div className="flex justify-between items-center mb-3 pl-1"><h3 className="font-bold text-stone-800 text-sm">æ¨èç»ƒä¹ </h3><span className="text-xs text-stone-400 flex items-center gap-1 cursor-pointer hover:text-vermilion">æŸ¥çœ‹æ›´å¤š</span></div>
                         <div className="grid grid-cols-3 gap-3">
                            {MOCK_RECOMMENDATIONS[0].map((char, i) => (
                                <div key={i} className="aspect-square bg-white rounded-2xl border border-stone-100 flex flex-col items-center justify-center shadow-sm active:scale-95 transition-transform cursor-pointer" onClick={onUpload}>
                                    <span className="font-serif text-4xl text-stone-800 mb-1">{char}</span>
                                    <span className="text-[10px] text-stone-400">åŸºç¡€ç»ƒä¹ </span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Refactored History Screen ---
        const HistoryScreen = ({ onItemClick }) => (
            <div className="flex-1 p-4 fade-enter overflow-y-auto pb-24 no-scrollbar">
                <div className="flex justify-between items-center py-2 mb-2">
                    <h2 className="text-lg font-bold text-stone-800 mx-auto">å†å²è®°å½•</h2>
                    <Icon name="filter" size={20} className="text-stone-800 absolute right-4" />
                </div>

                {/* Progress Chart Card */}
                <div className="bg-white rounded-2xl p-4 shadow-sm border border-stone-100 mb-4">
                    <div className="flex justify-between items-center mb-4">
                        <span className="text-sm text-stone-500">è¿›æ­¥æ›²çº¿</span>
                        <span className="text-xs text-stone-400">æœ€è¿‘3æ¬¡</span>
                    </div>
                    <div className="h-32 relative flex items-end justify-between px-4 pb-2 mb-4 border-l border-b border-stone-100">
                        <div className="absolute inset-0 flex flex-col justify-between pointer-events-none">
                            <div className="border-t border-stone-100 h-px w-full"></div>
                            <div className="border-t border-stone-100 h-px w-full"></div>
                            <div className="border-t border-stone-100 h-px w-full"></div>
                        </div>
                        <svg className="absolute inset-0 w-full h-full overflow-visible" preserveAspectRatio="none">
                            <path d="M0,128 L0,100 L150,20 L320,20 L320,128 Z" fill="rgba(220, 20, 60, 0.05)" />
                            <polyline points="0,100 150,20 320,20" fill="none" stroke="#DC143C" strokeWidth="2" />
                            <circle cx="0" cy="100" r="4" fill="#DC143C" />
                            <circle cx="150" cy="20" r="4" fill="#DC143C" />
                            <circle cx="320" cy="20" r="4" fill="#DC143C" />
                        </svg>
                    </div>
                    <div className="flex justify-around text-[10px] text-stone-400">
                        <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-red-500"></div>æœ€ä½: 61</div>
                        <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-orange-400"></div>å¹³å‡: 68</div>
                        <div className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-green-500"></div>æœ€é«˜: 76</div>
                    </div>
                </div>

                {/* Summary Cards */}
                <div className="grid grid-cols-3 gap-3 mb-6">
                    <div className="bg-white p-3 rounded-xl shadow-sm text-center flex flex-col items-center justify-center h-24">
                        <Icon name="pen-tool" size={24} className="text-vermilion mb-1" />
                        <div className="text-xl font-bold text-vermilion">3</div>
                        <div className="text-xs text-stone-400">æ€»æ¬¡æ•°</div>
                    </div>
                    <div className="bg-white p-3 rounded-xl shadow-sm text-center flex flex-col items-center justify-center h-24">
                        <Icon name="star" size={24} className="text-orange-500 mb-1" />
                        <div className="text-xl font-bold text-orange-500">68</div>
                        <div className="text-xs text-stone-400">å¹³å‡åˆ†</div>
                    </div>
                    <div className="bg-white p-3 rounded-xl shadow-sm text-center flex flex-col items-center justify-center h-24">
                        <Icon name="trophy" size={24} className="text-yellow-500 mb-1" />
                        <div className="text-xl font-bold text-yellow-500">76</div>
                        <div className="text-xs text-stone-400">æœ€é«˜åˆ†</div>
                    </div>
                </div>

                {/* Updated History List */}
                <div className="space-y-3">
                    {DEMO_HISTORY.map(item => (
                        <div key={item.id} onClick={() => onItemClick(item)} className="bg-white p-4 rounded-2xl shadow-sm flex items-center gap-4 cursor-pointer active:bg-stone-50 transition-colors border border-stone-50">
                             <div className="w-16 h-16 bg-stone-100/80 rounded-xl flex items-center justify-center font-serif text-3xl text-stone-700 font-bold">
                                {item.char}
                            </div>
                            <div className="flex-1 flex flex-col justify-center">
                                <div className="flex items-baseline gap-1">
                                    <span className="text-2xl font-bold text-vermilion">{item.score}</span>
                                    <span className="text-sm font-bold text-vermilion">åˆ†</span>
                                </div>
                                <div className="text-xs text-stone-400 mt-1">{item.date}</div>
                            </div>
                            <div className="flex items-center gap-1">
                                <span className="text-xs text-stone-400">æŸ¥çœ‹è¯„ä¼°æŠ¥å‘Š</span>
                                <Icon name="chevron-right" size={20} className="text-stone-300" />
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );
        
        const ProfileScreen = () => (
            <div className="flex-1 fade-enter p-4 overflow-y-auto no-scrollbar pb-24">
                <h2 className="text-center text-lg font-bold text-stone-800 mb-4 pt-2">ä¸ªäººä¸­å¿ƒ</h2>
                <div className="bg-white rounded-2xl p-4 shadow-sm flex items-center justify-between mb-4">
                    <div className="flex items-center gap-4">
                        <div className="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center shrink-0"><Icon name="user" size={32} className="text-vermilion" fill="#DC143C" /></div>
                        <div><div className="text-sm bg-stone-100 text-stone-500 px-2 py-0.5 rounded inline-block mb-1">æ™®é€šç”¨æˆ·</div></div>
                    </div>
                    <Icon name="pencil" size={20} className="text-stone-400" />
                </div>
                <div className="bg-gradient-to-r from-amber-400 to-orange-500 rounded-2xl p-4 flex justify-between items-center shadow-md mb-6 text-white">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-white/20 rounded-full backdrop-blur-sm"><Icon name="crown" size={24} fill="white" /></div>
                        <div><div className="font-bold text-lg">å‡çº§ä¼šå‘˜</div><div className="text-xs text-white/80">æ— é™è¯„ä¼° Â· å®Œæ•´åé¦ˆ Â· ä¸“å±æœåŠ¡</div></div>
                    </div>
                    <Icon name="chevron-right" size={24} />
                </div>
                <div className="bg-white rounded-2xl shadow-sm mb-4 overflow-hidden">
                    <div className="p-4 border-b border-stone-50 font-bold text-stone-700">å­¦ä¹ æ•°æ®</div>
                    {[{ icon: 'pen-tool', label: 'æ€»ç»ƒä¹ æ¬¡æ•°', value: '3 æ¬¡', color: 'text-vermilion' }, { icon: 'star', label: 'å¹³å‡åˆ†æ•°', value: '62.8 åˆ†', color: 'text-vermilion' }, { icon: 'calendar', label: 'ä»Šæ—¥ç»ƒä¹ æ¬¡æ•°', value: '2 æ¬¡', color: 'text-vermilion' }, { icon: 'flame', label: 'è¿ç»­å¤©æ•°', value: '1 å¤©', color: 'text-vermilion' }].map((item, i) => (
                        <div key={i} className="flex items-center justify-between p-4 border-b border-stone-50 last:border-0">
                            <div className="flex items-center gap-3"><Icon name={item.icon} size={20} className={item.color} /><span className="text-sm text-stone-600">{item.label}</span></div>
                            <span className="text-sm font-bold text-stone-800">{item.value}</span>
                        </div>
                    ))}
                </div>
                <div className="bg-white rounded-2xl shadow-sm mb-6 overflow-hidden">
                    {[{ icon: 'settings', label: 'è®¾ç½®' }, { icon: 'help-circle', label: 'å¸®åŠ©ä¸åé¦ˆ' }, { icon: 'info', label: 'å…³äºæˆ‘ä»¬' }].map((item, i) => (
                        <div key={i} className="flex items-center justify-between p-4 border-b border-stone-50 last:border-0 cursor-pointer active:bg-stone-50">
                            <div className="flex items-center gap-3"><Icon name={item.icon} size={20} className="text-stone-500" /><span className="text-sm text-stone-600">{item.label}</span></div>
                            <Icon name="chevron-right" size={18} className="text-stone-300" />
                        </div>
                    ))}
                </div>
                <button className="w-full py-3 rounded-full border border-red-500 text-red-500 font-bold flex items-center justify-center gap-2 hover:bg-red-50 transition-colors"><Icon name="log-out" size={18} /> é€€å‡ºç™»å½•</button>
            </div>
        );

        const UploadScreen = ({ onConfirm, onBack }) => (
             <FullScreenOverlay>
                <div className="flex-1 relative bg-black flex items-center justify-center overflow-hidden">
                     <img src="https://images.unsplash.com/photo-1555445054-848885438486?q=80&w=2070&auto=format&fit=crop" className="absolute inset-0 w-full h-full object-cover opacity-60" />
                     <div className="absolute inset-12 border-2 border-red-500/50 rounded-lg border-dashed grid grid-cols-2 grid-rows-2 shadow-[0_0_0_9999px_rgba(0,0,0,0.5)] pointer-events-none"><div className="border-r border-b border-red-500/30"></div><div className="border-b border-red-500/30"></div><div className="border-r border-red-500/30"></div></div>
                     <div className="absolute top-6 left-0 w-full text-center text-white/80 text-sm drop-shadow-lg">è¯·å°†æ–‡å­—å¯¹å‡†çº¢è‰²æ¡†çº¿ä¸­å¿ƒ</div>
                     <button onClick={onBack} className="absolute top-6 left-6 text-white p-2 rounded-full bg-black/30 backdrop-blur"><Icon name="x" /></button>
                </div>
                <div className="h-44 bg-stone-900 rounded-t-3xl flex items-center justify-center gap-10 pb-6">
                     <button className="text-stone-500 text-xs flex flex-col items-center gap-2"><div className="p-3 bg-stone-800 rounded-full"><Icon name="image" /></div>ç›¸å†Œ</button>
                     <button onClick={onConfirm} className="w-20 h-20 bg-white rounded-full border-4 border-stone-500 p-1 transform active:scale-90 transition-transform"><div className="w-full h-full bg-vermilion rounded-full border-2 border-white"></div></button>
                     <button className="text-stone-500 text-xs flex flex-col items-center gap-2"><div className="p-3 bg-stone-800 rounded-full"><Icon name="rotate-ccw" /></div>é‡ç½®</button>
                </div>
            </FullScreenOverlay>
        );

        const EvaluatingScreen = ({ onFinish }) => {
            const [p, setP] = useState(0);
            useEffect(() => {
                const t = setInterval(() => setP(old => { if (old >= 100) { clearInterval(t); setTimeout(onFinish, 500); return 100; } return old + 1; }), 20);
                return () => clearInterval(t);
            }, []);
            return (
                <FullScreenOverlay>
                    <div className="flex-1 flex flex-col items-center justify-center px-8">
                        <div className="relative mb-12"><div className="text-[120px] font-serif text-stone-200 leading-none">æ°¸</div><div className="absolute inset-0 text-[120px] font-serif text-vermilion leading-none overflow-hidden" style={{height: `${p}%`}}>æ°¸</div></div>
                        <div className="w-full max-w-xs space-y-2"><div className="flex justify-between text-xs text-stone-400 font-medium"><span>AI æ·±åº¦åˆ†æä¸­...</span><span>{p}%</span></div><div className="w-full h-1.5 bg-stone-200 rounded-full overflow-hidden"><div className="h-full bg-vermilion" style={{width: `${p}%`}}></div></div></div>
                    </div>
                </FullScreenOverlay>
            );
        };

        const PracticeScreen = ({ onUpload }) => {
            const [activeCat, setActiveCat] = useState('all');
            const [searchTerm, setSearchTerm] = useState('');
            const filteredChars = PRACTICE_CHARS.filter(c => { if (searchTerm && !c.char.includes(searchTerm)) return false; if (activeCat === 'all') return true; if (activeCat === 'basic' && c.level === 'å…¥é—¨') return true; if (activeCat === 'structure' && c.level === 'ç»“æ„') return true; if (activeCat === 'advanced' && c.level === 'è¿›é˜¶') return true; return false; });
            return (
                <div className="flex-1 p-6 fade-enter overflow-y-auto pb-24 no-scrollbar">
                     <div className="sticky top-0 bg-F9F9F9 z-10 pb-4">
                        <h2 className="text-xl font-bold text-stone-800 mb-4">å­—å¸–ä¸ç»ƒä¹ </h2>
                        <div className="bg-white rounded-xl p-2 flex items-center gap-2 shadow-sm border border-stone-100 mb-4"><Icon name="search" size={18} className="text-stone-400 ml-2" /><input type="text" placeholder="æœç´¢æ±‰å­—..." className="flex-1 outline-none text-sm text-stone-700" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} /></div>
                        <div className="flex gap-2 overflow-x-auto no-scrollbar">{PRACTICE_CATEGORIES.map(cat => (<button key={cat.id} onClick={() => setActiveCat(cat.id)} className={`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${activeCat === cat.id ? 'bg-vermilion text-white' : 'bg-white text-stone-500 border border-stone-100'}`}>{cat.label}</button>))}</div>
                    </div>
                    <div className="grid grid-cols-4 gap-3 pb-20">{filteredChars.map((item, i) => (<div key={i} onClick={onUpload} className="aspect-square bg-white rounded-xl shadow-sm border border-stone-100 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-transform"><span className="font-serif text-2xl text-stone-800">{item.char}</span><div className="absolute bottom-1 right-1 w-1.5 h-1.5 rounded-full bg-stone-200"></div></div>))} <div className="aspect-square rounded-xl border-2 border-dashed border-stone-200 flex items-center justify-center text-stone-300"><Icon name="plus" size={24} /></div></div>
                </div>
            );
        };

        const ResultScreen = ({ resultData, onBack }) => {
            const [activeTab, setActiveTab] = useState('details'); 
            const [showMenu, setShowMenu] = useState(false);
            const [showShare, setShowShare] = useState(false);
            
            const data = resultData || DEMO_HISTORY[0]; 
            const dimensions = data.dimensions || [];

            const handleMenuAction = (action) => {
                if (action === 'share') setShowShare(true);
            };

            const TabButton = ({ id, label }) => (
                <button onClick={() => setActiveTab(id)} className={`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${activeTab === id ? 'text-vermilion border-vermilion' : 'text-stone-400 border-transparent'}`}>{label}</button>
            );

            const RadarChart = ({ data }) => {
                const size = 200;
                const center = size / 2;
                const radius = 80;
                const radarData = data.map(d => d.score);
                const angles = radarData.map((_, i) => (i * 360) / radarData.length);
                
                const getCoords = (value, angle) => {
                    const radians = (angle - 90) * (Math.PI / 180);
                    return { x: center + (radius * (value / 100)) * Math.cos(radians), y: center + (radius * (value / 100)) * Math.sin(radians) };
                };
                const points = radarData.map((val, i) => { const { x, y } = getCoords(val, angles[i]); return `${x},${y}`; }).join(' ');
                const gridLevels = [100, 75, 50, 25];
                const labels = ["ç¬”ç”»", "ç»“æ„", "å¹³è¡¡", "ç¾æ„Ÿ", "å‡†ç¡®", "ç¬”åŠ¿", "èŠ‚å¥", "å®Œæ•´"]; 

                return (
                    <div className="relative w-[200px] h-[200px] mx-auto my-4">
                        <svg width={size} height={size} className="overflow-visible">
                            {gridLevels.map(level => (<polygon key={level} points={angles.map(a => { const {x,y} = getCoords(level, a); return `${x},${y}`; }).join(' ')} fill="none" stroke="#ddd" strokeWidth="1" opacity="0.5" />))}
                            {angles.map((a, i) => { const {x,y} = getCoords(100, a); return <line key={i} x1={center} y1={center} x2={x} y2={y} stroke="#eee" strokeWidth="1" /> })}
                            <polygon points={points} fill="rgba(220, 20, 60, 0.2)" stroke="#DC143C" strokeWidth="2" className="radar-path" />
                            {angles.map((a, i) => { const {x,y} = getCoords(110, a); return ( <text key={i} x={x} y={y} fontSize="12" textAnchor="middle" dominantBaseline="middle" fill="#666"> {labels[i]} </text> ); })}
                        </svg>
                    </div>
                );
            };

            return (
                <div className="absolute inset-0 bg-stone-100 z-50 flex flex-col fade-enter overflow-hidden">
                    <div className="bg-white px-4 py-3 flex justify-between items-center shadow-sm z-20 shrink-0">
                        <button onClick={onBack}><Icon name="arrow-left" className="text-stone-600" /></button>
                        <span className="font-bold text-stone-800">è¯„ä¼°æŠ¥å‘Š</span>
                        <button onClick={() => setShowMenu(true)}><Icon name="more-horizontal" className="text-stone-600" /></button>
                    </div>
                    <div className="bg-white flex border-b border-stone-100 z-10">
                        <TabButton id="overall" label="ç»¼åˆè¯„ä¼°" /><TabButton id="details" label="ç»´åº¦è¯¦æƒ…" /><TabButton id="compare" label="å­—å¸–å¯¹æ¯”" />
                    </div>
                    <div className="flex-1 overflow-y-auto pb-24 no-scrollbar">
                        {activeTab === 'overall' && (
                            <div className="p-4 space-y-4 fade-enter">
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative overflow-hidden">
                                    <div className="absolute -right-6 -top-6 w-32 h-32 bg-yellow-50 rounded-full opacity-50"></div>
                                    <div className="flex justify-between items-start mb-2">
                                        <div className="w-20 h-20 bg-stone-100 rounded-lg flex items-center justify-center border border-stone-200 overflow-hidden"><span className="font-serif text-5xl text-stone-800">{data.char}</span></div>
                                        <div className="text-right">
                                            <span className="text-xs text-stone-400 block">æ€»åˆ†</span>
                                            <span className="text-5xl font-bold font-serif text-vermilion">{data.score}</span>
                                            <div className="bg-yellow-500 text-white text-xs px-2 py-0.5 rounded mt-1 text-center shadow-md">ç­‰çº§: {data.grade}</div>
                                        </div>
                                    </div>
                                    <div className="mt-4 pt-4 border-t border-stone-50">
                                       <h4 className="text-center font-bold text-stone-700 mb-2">8ç»´åº¦è¯„ä¼°é›·è¾¾å›¾</h4>
                                       <RadarChart data={dimensions} />
                                    </div>
                                </div>
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-100">
                                    <h3 className="font-bold mb-4 flex items-center gap-2 text-stone-800"><Icon name="sparkles" size={16} className="text-vermilion"/> AI æ€»è¯„</h3>
                                    <p className="text-sm text-stone-600 leading-relaxed">æ‚¨çš„â€œ{data.char}â€å­—æ•´ä½“æ°”éŸµç”ŸåŠ¨ã€‚å…¶ä¸­<strong>{dimensions.find(d=>d.score>90)?.name || 'ç¬”è§¦è´¨é‡'}</strong>è¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨<strong>{dimensions.find(d=>d.score<60)?.name || 'å­—å½¢å‡†ç¡®åº¦'}</strong>ä¸Šè¿˜æœ‰æå‡ç©ºé—´ã€‚å»ºè®®é‡ç‚¹ä¸´æ‘¹å­—å¸–ç»“æ„ã€‚</p>
                                </div>
                               {data.advice && data.advice.length > 0 && (
                                   <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-100">
                                       <h3 className="font-bold mb-4 flex items-center gap-2 text-stone-800"><Icon name="edit-3" size={16} className="text-vermilion"/> AI æå‡å»ºè®®</h3>
                                       <div className="space-y-3">
                                           {data.advice.map((adv, i) => (
                                               <div key={i} className="flex items-start gap-3">
                                                   <span className="text-lg">{adv.icon}</span>
                                                   <p className="text-sm text-stone-600 leading-relaxed">{adv.text}</p>
                                               </div>
                                           ))}
                                       </div>
                                   </div>
                               )}
                            </div>
                        )}
                        {activeTab === 'details' && (
                            <div className="p-4 space-y-2 fade-enter">
                                {dimensions.map((dim, i) => (
                                    <div key={i} className="bg-white p-3 rounded-xl shadow-sm border border-stone-100">
                                        <div className="flex justify-between items-center mb-1.5">
                                            <div className="flex items-center gap-2">
                                                <span className="font-bold text-sm text-stone-400 w-6 text-left">{i + 1}.</span>
                                                <div className="w-7 h-7 bg-stone-50 rounded-md flex items-center justify-center text-base">{dim.icon}</div>
                                                <span className="font-bold text-stone-700 text-sm">{dim.name}</span>
                                            </div>
                                            <span className={`font-bold text-base ${dim.text}`}>{dim.score.toFixed(1)}</span>
                                        </div>
                                        <div className="h-1.5 w-full bg-stone-100 rounded-full overflow-hidden mb-1.5"><div className={`h-full ${dim.color}`} style={{width: `${Math.max(5, dim.score)}%`}}></div></div>
                                        <p className="text-xs text-stone-500">{dim.comment}</p>
                                    </div>
                                ))}
                            </div>
                        )}
                        {activeTab === 'compare' && (
                            <div className="p-4 space-y-6 fade-enter">
                                <div className="flex gap-4 h-48">
                                    <div className="flex-1 flex flex-col gap-2"><span className="text-xs text-stone-400 text-center">æ‚¨çš„ä½œå“</span><div className="flex-1 bg-white rounded-xl border-2 border-stone-200 overflow-hidden relative"><div className="absolute inset-0 grid grid-cols-2 grid-rows-2 pointer-events-none opacity-30"><div className="border-r border-b border-red-500 border-dashed"></div><div className="border-b border-red-500 border-dashed"></div><div className="border-r border-red-500 border-dashed"></div></div><div className="w-full h-full flex items-center justify-center bg-stone-50 text-stone-300"><Icon name="image" size={32}/></div></div></div>
                                    <div className="flex-1 flex flex-col gap-2"><span className="text-xs text-stone-400 text-center">åå®¶å­—å¸– (æ¥·ä½“)</span><div className="flex-1 bg-stone-800 rounded-xl border-2 border-stone-600 overflow-hidden relative flex items-center justify-center"><div className="absolute inset-0 grid grid-cols-2 grid-rows-2 pointer-events-none opacity-30"><div className="border-r border-b border-red-500 border-dashed"></div><div className="border-b border-red-500 border-dashed"></div><div className="border-r border-red-500 border-dashed"></div></div><span className="font-serif text-6xl text-white">{data.char}</span></div></div>
                                </div>
                                <div className="bg-orange-50 border border-orange-100 p-4 rounded-xl"><h4 className="text-sm font-bold text-orange-800 mb-2 flex items-center gap-2"><Icon name="search" size={14}/> å¯¹æ¯”åˆ†æ</h4><p className="text-xs text-orange-700 leading-relaxed">ä¸å­—å¸–ç›¸æ¯”ï¼Œæ‚¨çš„â€œ{data.char}â€å­—æ•´ä½“ç¨æ˜¾ç˜¦é•¿ã€‚å­—å¸–ä¸­çš„â€œç‚¹â€ç”»æ›´åŠ åšé‡ï¼Œå»ºè®®æ‚¨åœ¨ä¹¦å†™æ—¶å¢åŠ æŒ‰ç¬”åŠ›åº¦ã€‚</p></div>
                            </div>
                        )}
                    </div>
                    <div className="fixed bottom-0 w-full max-w-[400px] bg-white p-4 border-t border-stone-100 flex gap-4 z-20">
                        <button onClick={onBack} className="flex-1 py-3 rounded-xl border border-stone-300 text-stone-600 font-bold">è¿”å›</button>
                        <button className="flex-1 py-3 rounded-xl bg-vermilion text-white font-bold shadow-lg shadow-red-200">å†ç»ƒä¸€æ¬¡</button>
                    </div>
                    {showMenu && <ResultMenu onClose={() => setShowMenu(false)} onAction={handleMenuAction} />}
                    {showShare && <ShareModal onClose={() => setShowShare(false)} score={data.score} grade={data.grade} char={data.char} />}
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('login'); 
            const [tab, setTab] = useState('dashboard');
            const [selectedResult, setSelectedResult] = useState(null);

            const handleUpload = () => setView('upload');
            const handleHistoryItemClick = (item) => { setSelectedResult(item); setView('result'); };
            const handleNavigate = (targetTab) => setTab(targetTab);

            const NavItem = ({ id, icon, label }) => (
                <div onClick={() => setTab(id)} className={`flex flex-col items-center gap-1 cursor-pointer transition-colors ${tab === id ? 'text-vermilion' : 'text-stone-400'}`}>
                    <Icon name={icon} size={24} />
                    <span className="text-[10px] font-medium">{label}</span>
                </div>
            );

            return (
                <div className="mobile-frame">
                    {view === 'login' && <LoginScreen onLogin={() => setView('app')} />}
                    {view === 'app' && (
                        <>
                            <div className="flex-1 overflow-hidden relative bg-F9F9F9 flex flex-col">
                                {tab === 'dashboard' && <DashboardScreen onUpload={handleUpload} onNavigate={handleNavigate} />}
                                {tab === 'practice' && <PracticeScreen onUpload={handleUpload} />}
                                {tab === 'history' && <HistoryScreen onItemClick={handleHistoryItemClick} />}
                                {tab === 'profile' && <ProfileScreen />}
                            </div>
                            <div className="bg-white border-t border-stone-100 py-2 px-6 flex justify-between items-center z-30 h-16 shrink-0">
                                <NavItem id="dashboard" icon="home" label="é¦–é¡µ" />
                                <NavItem id="practice" icon="book-open" label="ç»ƒä¹ " />
                                <NavItem id="history" icon="history" label="å†å²" />
                                <NavItem id="profile" icon="user" label="æˆ‘çš„" />
                            </div>
                        </>
                    )}
                    {view === 'upload' && <UploadScreen onConfirm={() => setView('evaluating')} onBack={() => setView('app')} />}
                    {view === 'evaluating' && <EvaluatingScreen onFinish={() => { setSelectedResult(null); setView('result'); }} />}
                    {view === 'result' && <ResultScreen resultData={selectedResult} onBack={() => setView('app')} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>